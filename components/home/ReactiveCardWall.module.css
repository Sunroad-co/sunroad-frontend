/**
 * ReactiveCardWall CSS Module
 * 
 * Animations and styles for the reactive card wall background.
 * Cards float gently and react to intent changes.
 */

/* Subtle floating animation - different offsets create organic feel */
@keyframes float1 {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

@keyframes float2 {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-3px); }
}

@keyframes float3 {
  0%, 100% { transform: translateY(-2px); }
  50% { transform: translateY(2px); }
}

/* Glow pulse for active cards */
@keyframes glowPulse {
  0%, 100% { 
    box-shadow: 0 0 20px rgba(217, 119, 6, 0.15), 
                0 4px 20px rgba(0, 0, 0, 0.1);
  }
  50% { 
    box-shadow: 0 0 30px rgba(217, 119, 6, 0.25), 
                0 8px 30px rgba(0, 0, 0, 0.15);
  }
}

/* Card base styles */
.card {
  transition: 
    filter 0.6s ease-out,
    transform 0.5s ease-out,
    opacity 0.5s ease-out,
    box-shadow 0.5s ease-out;
  will-change: transform, filter, opacity;
}

/* Subtle hover effect for revealed cards - uses box-shadow to avoid transform conflicts */
.card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 0 25px rgba(217, 119, 6, 0.25);
  transition: box-shadow 0.3s ease-out;
}

/* Float animation variants */
.float1 {
  animation: float1 8s ease-in-out infinite;
}

.float2 {
  animation: float2 10s ease-in-out infinite;
  animation-delay: -2s;
}

.float3 {
  animation: float3 9s ease-in-out infinite;
  animation-delay: -4s;
}

/* Active card glow */
.active {
  animation: glowPulse 2s ease-in-out infinite;
}

/* Subtle fade in animation for cards becoming active */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Subtle fade out animation for cards becoming inactive */
@keyframes fadeOut {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-8px);
  }
}

/* Pre-reveal state: keep cards at opacity 0 until animation starts */
.preReveal {
  opacity: 0 !important;
}

.fadeIn {
  animation: fadeIn 0.5s ease-out forwards;
  /* Override base opacity during animation */
  opacity: 0 !important;
}

.fadeOut {
  animation: fadeOut 0.5s ease-out forwards;
}

/* Subtle grid overlay behind cards - matches grid: 3 cols (sm/md), 6 cols (lg), gap-5/gap-6, p-5/p-7, gridAutoRows clamp(200px,24vh,300px) */
.gridOverlay {
  background-image: 
    linear-gradient(to right, rgba(217, 119, 6, 0.2) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(217, 119, 6, 0.25) 1px, transparent 1px),
    radial-gradient(circle, rgba(217, 119, 6, 0.10) 0.5px, transparent 0.6px);
  /* Cell size = (width - 2*padding - (cols-1)*gap) / cols, row = clamp(200px,24vh,300px) + gap. 3 cols: p-5 (1.25rem), gap-5 (1.25rem) */
  background-size: 
    calc((100% - 2 * 1.25rem - 2 * 1.25rem) / 3) calc(clamp(200px, 24vh, 300px) + 1.25rem),
    calc((100% - 2 * 1.25rem - 2 * 1.25rem) / 3) calc(clamp(200px, 24vh, 300px) + 1.25rem),
    calc((100% - 2 * 1.25rem - 2 * 1.25rem) / 3) calc(clamp(200px, 24vh, 300px) + 1.25rem);
  background-position: 
    1.25rem 1.25rem,
    1.25rem 1.25rem,
    1.25rem 1.25rem;
  mask-image: radial-gradient(circle at center, black 55%, transparent 100%);
  -webkit-mask-image: radial-gradient(circle at center, black 55%, transparent 100%);
  animation: gridBreath 8s ease-in-out infinite;
  opacity: 0.05;
}

/* Grid overlay for large screens (6 columns): p-7 (1.75rem), gap-6 (1.5rem) */
@media (min-width: 1024px) {
  .gridOverlay {
    background-size: 
      calc((100% - 2 * 1.75rem - 5 * 1.5rem) / 6) calc(clamp(200px, 24vh, 300px) + 1.5rem),
      calc((100% - 2 * 1.75rem - 5 * 1.5rem) / 6) calc(clamp(200px, 24vh, 300px) + 1.5rem),
      calc((100% - 2 * 1.75rem - 5 * 1.5rem) / 6) calc(clamp(200px, 24vh, 300px) + 1.5rem);
    background-position: 
      1.75rem 1.75rem,
      1.75rem 1.75rem,
      1.75rem 1.75rem;
  }
}

/* Subtle breathing animation for grid overlay */
@keyframes gridBreath {
  0%, 100% {
    opacity: 0.35;
  }
  50% {
    opacity: 0.55;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .float1,
  .float2,
  .float3 {
    animation: none;
  }
  
  .active {
    animation: none;
    box-shadow: 0 0 25px rgba(217, 119, 6, 0.2), 
                0 6px 25px rgba(0, 0, 0, 0.12);
  }
  
  .fadeIn,
  .fadeOut {
    animation: none;
  }
  
  .preReveal {
    /* In reduced motion, don't force opacity 0 - let cards appear immediately */
    opacity: 1 !important;
  }
  
  .card {
    transition-duration: 0.3s;
  }
  
  .gridOverlay {
    animation: none;
    opacity: 0.45;
  }
}
